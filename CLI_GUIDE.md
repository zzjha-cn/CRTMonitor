# 交互式命令行使用指南

### 车次选择

- 使用方向键移动
- 空格键选择/取消选择
- `a` 键全选/取消全选
- `i` 键反选
- 回车确认

### 日期格式

- 格式：YYYYMMDD
- 示例：20250629（表示 2025 年 6 月 29 日）
- 支持范围：今天到未来 15 天

### 站点名称

- 支持主要城市名称（如：北京、上海、广州）
- 支持具体车站名称（如：北京南、上海虹桥）
- 建议使用常见的站点名称

### 席别选择

- 商务座、特等座、一等座、二等座
- 软卧、硬卧、软座、硬座、无座
- 不选择任何席别表示监控所有席别

## 🔧 配置示例

生成的配置文件格式：

```yaml
watch:
  - from: "上海"
    to: "北京"
    date: "20250629"
    trains:
      - code: "G104"
        from: "上海虹桥"
        to: "北京南"
        seatCategory:
          - "二等座"
        checkRoundTrip: false

notifications:
  - type: "Lark"
    webhook: "https://open.feishu.cn/open-apis/bot/v2/hook/..."
    secret: "your-secret-key" # 可选，启用签名校验时必填
  - type: "Bark"
    deviceKey: "your-device-key"
    serverUrl: "https://api.day.app"
    group: "火车票监控"
  - type: "SMTP"
    host: "smtp.gmail.com"
    port: 587
    user: "your-email@gmail.com"
    pass: "your-password"
    to: "recipient@example.com"

interval: 15
delay: 5
```

## ❓ 常见问题

### 1. 找不到车次

- 检查出发地和目的地名称是否正确
- 确认日期是否在有效范围内（0-15 天）
- 某些路线可能没有直达车次

### 2. 站点名称无效

- 使用标准的城市名称或车站名称
- 例如：北京（而不是 Beijing）、上海虹桥（而不是上海虹桥站）

### 3. 配置保存失败

- 确保有写入权限
- 检查配置目录是否存在

### 4. 推送配置失败

- 检查 Webhook URL 格式是否正确
- 确认机器人 Token 和 Chat ID 有效

### 5. 编辑配置时的问题

- **修改日期后找不到车次**：某些日期可能没有车次运行，请选择其他日期
- **删除任务后配置为空**：如果删除了所有监控任务，程序将无法运行，请至少保留一个任务
- **推送配置丢失**：重置配置会清空所有设置，包括推送配置
- **配置文件损坏**：如果手动编辑 config.yml 导致格式错误，可以删除文件重新配置

### 6. 建议

- **监控任务数量**：建议单个配置文件不超过 10 个监控任务
- **查询间隔**：建议间隔不低于 5 分钟，避免频繁请求
- **车次选择**：只选择真正需要的车次，减少不必要的查询

## 步骤
- 基于watch获取车站总表
- 通过配置筛选（code、始发站+终点站、发车时间、到站时间、车次）
- 
